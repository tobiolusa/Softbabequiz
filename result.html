<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Softbabe Style Result</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <style>
        html, body { height: 100%; margin: 0; padding: 0; }
        body {
            font-family: 'Montserrat', sans-serif;
            background: #ffffff;
            color: #333;
            overflow-x: hidden;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            position: relative;
            z-index: 1;
        }
        header {
            background: #fff;
            padding: 20px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
            z-index: 2;
        }
        .container { 
            max-width: 800px; 
            margin: 0 auto; 
            padding: 50px 20px; 
            text-align: center; 
            flex: 1 0 auto; 
            position: relative; 
            z-index: 2;
        }
        h1 { font-size: 2.5em; color: #000; }
        p { font-size: 1.2em; margin-bottom: 30px; color: #555; }
        .shop-btn, .retake-btn {
            padding: 15px 40px; font-size: 1.1em; background-color: #000; color: #fff;
            border: none; border-radius: 25px; cursor: pointer; margin: 10px;
        }
        .retake-btn { background-color: #ff6b6b; }
        .retake-btn:hover { background-color: #ff4d4d; }
        .shop-btn:hover { background-color: #333; }
        .results-section { animation: slideIn 0.8s ease-in; }
        footer { 
            background: #000; 
            color: #fff; 
            padding: 20px 0; 
            text-align: center; 
        }
        @keyframes slideIn { from { opacity: 0; transform: translateY(50px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body>

    <header>
        <div class="logo">
            <img src="softbabe.jpeg" alt="Softbabe Logo" style="width: 80px;">
        </div>
        <a href="https://softbabelagos.com" target="_blank">
            <button class="shop-btn">Shop Now</button>
        </a>
    </header>

    <div class="container">
        <div id="results" class="results-section">
            <h1 id="result-title">Your Softbabe Style</h1>
            <img id="result-image" src="" alt="Your Style Image" style="max-width: 600px; height: 600px; display: none; margin: 20px auto;">
            <p id="result-jewelry"></p>

            <!-- Shop Your Style Button -->
            <button class="shop-btn" onclick="window.location.href='https://softbabelagos.com'">Shop Your Style</button>

            <!-- Retake Quiz Button -->
            <button class="retake-btn" onclick="retakeQuiz()">Retake Quiz</button>
        </div>
    </div>

    <footer>
        <div>Being soft is a lifestyle.</div>
    </footer>

    <script>
        function submitResult() {
            const userName = sessionStorage.getItem('userName');
            const userEmail = sessionStorage.getItem('userEmail');
            const quizAnswers = JSON.parse(sessionStorage.getItem('quizAnswers'));
            const resultTitle = document.getElementById('result-title').innerText;

            if (!userName || !userEmail || !resultTitle) return;

            const formData = new FormData();
            formData.append('name', userName);
            formData.append('email', userEmail);
            formData.append('finalResult', resultTitle);
            formData.append('answers', JSON.stringify(quizAnswers));

            fetch('https://formspree.io/f/xeoggvnd', {
                method: 'POST',
                body: formData
            })
            .then(response => response.json())
            .then(data => {
                console.log('Form submitted:', data);
                alert('Your result has been submitted successfully.');
            })
            .catch(error => {
                console.error('Error submitting form:', error);
                alert('There was an error submitting your result. Please try again.');
            });
        }

        function showResults() {
            const userName = sessionStorage.getItem('userName') || 'User';
            const answers = JSON.parse(sessionStorage.getItem('quizAnswers')) || {};

            const styleCounts = {};
            for (let i = 1; i <= 6; i++) {
                const styles = answers[`q${i}`];
                if (Array.isArray(styles)) {
                    styles.forEach(style => {
                        styleCounts[style] = (styleCounts[style] || 0) + 1;
                    });
                }
            }

            const dominantStyle = Object.keys(styleCounts).reduce((a, b) => styleCounts[a] > styleCounts[b] ? a : b, 'Minimalist');

            document.getElementById('result-title').innerText = `${userName}, Youâ€™re  ${dominantStyle}!`;

            const resultImage = document.getElementById('result-image');
            const styleImages = {
                'Statement Queen': 'result/statement.jpeg',
                'Luxe': 'result/luxe.jpeg',
                'Minimalist': 'result/minimalist.jpeg',
                'Trendsetter': 'result/trendsetter.jpeg',
                'Boss Babe': 'result/bossbabe.jpeg',
                'Bohemian': 'result/bohemian.jpeg',
                'Romantic': 'result/romantic.jpeg',
                'Sporty': 'result/sporty.jpeg',
                'Y2K': 'result/y2k.jpeg',
                'Afrocentric': 'result/afrocentric.jpeg',
                'Edgy': 'result/edgy.jpeg'
            };

            if (styleImages[dominantStyle]) {
                resultImage.src = styleImages[dominantStyle];
                resultImage.style.display = 'block';
            } else {
                resultImage.style.display = 'none';
            }

            // Submit the result data to Formspree
            submitResult();
        }

        function retakeQuiz() {
            sessionStorage.removeItem('quizAnswers');
            sessionStorage.removeItem('userName');
            sessionStorage.removeItem('userEmail');
            window.location.href = 'form.html';
        }

        window.onload = showResults;
    </script>

</body>
</html>
