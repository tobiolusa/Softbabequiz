<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Your Softbabe Style Result</title>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;700&display=swap" rel="stylesheet">
    <style>
        html, body { height: 100%; margin: 0; padding: 0; }
        body {
            font-family: 'Montserrat', sans-serif;
            background: #ffffff;
            color: #333;
            overflow-x: hidden;
            display: flex;
            flex-direction: column;
            min-height: 100vh;
            position: relative;
            z-index: 1;
        }
        header {
            background: #fff;
            padding: 20px;
            border-bottom: 1px solid #eee;
            display: flex;
            justify-content: space-between;
            align-items: center;
            position: relative;
            z-index: 2;
        }
        .container { 
            max-width: 800px; 
            margin: 0 auto; 
            padding: 50px 20px; 
            text-align: center; 
            flex: 1 0 auto; 
            position: relative; 
            z-index: 2;
        }
        h1 { font-size: 2.5em; color: #000; }
        p { font-size: 1.2em; margin-bottom: 30px; color: #555; }
        .shop-btn, .retake-btn, .form-btn, .share-btn {
            padding: 15px 40px; font-size: 1.1em; background-color: #000; color: #fff;
            border: none; border-radius: 25px; cursor: pointer; margin: 10px;
        }
        .retake-btn { background-color: #ff6b6b; }
        .retake-btn:hover { background-color: #ff4d4d; }
        .shop-btn:hover, .form-btn:hover, .share-btn:hover { background-color: #333; }
        .results-section { animation: slideIn 0.8s ease-in; }
        footer { 
            background: #000; 
            color: #fff; 
            padding: 20px 0; 
            text-align: center; 
        }
        @keyframes slideIn { from { opacity: 0; transform: translateY(50px); } to { opacity: 1; transform: translateY(0); } }
        .form-section {
            max-width: 500px;
            margin: 20px auto;
            padding: 20px;
            background: #f9f9f9;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0,0,0,0.1);
        }
        .form-container {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        .form-container h2 {
            font-size: 1.8em;
            margin-bottom: 10px;
            color: #000;
        }
        .form-container p {
            font-size: 1em;
            margin-bottom: 20px;
            color: #555;
        }
        .form-container input {
            width: 100%;
            max-width: 400px;
            padding: 12px;
            margin: 10px 0;
            border: 1px solid #ddd;
            border-radius: 5px;
            font-size: 1em;
            font-family: 'Montserrat', sans-serif;
        }
        .form-container button {
            width: 100%;
            max-width: 400px;
        }
        .error-message {
            color: #ff4d4d;
            font-size: 0.9em;
            margin-top: 10px;
        }
        .share-section {
            margin: 20px 0;
        }
        .share-btn {
            padding: 10px 20px;
            font-size: 1em;
            background-color: #555;
            margin: 5px;
        }
        .share-btn.facebook { background-color: #3b5998; }
        .share-btn.twitter { background-color: #1da1f2; }
        .share-btn.instagram { background-color: #e4405f; }
        .share-btn.facebook:hover { background-color: #2f4377; }
        .share-btn.twitter:hover { background-color: #1886c9; }
        .share-btn.instagram:hover { background-color: #c13584; }
    </style>
</head>
<body>

    <header>
        <div class="logo">
            <img src="softbabe.jpeg" alt="Softbabe Logo" style="width: 80px;">
        </div>
        <a href="https://softbabelagos.com" target="_blank">
            <button class="shop-btn">Shop Now</button>
        </a>
    </header>

    <div class="container">
        <div id="results" class="results-section">
            <h1 id="result-title">Your Softbabe Style</h1>
            <img id="result-image" src="" alt="Your Style Image" style="max-width: 600px; height: 600px; display: none; margin: 20px auto;">
            <p id="result-jewelry"></p>

          

            <!-- Shop Your Style Button -->
            <button class="shop-btn" onclick="window.location.href='https://softbabelagos.com'">Shop Your Style</button>

            <!-- Retake Quiz Button -->
            <button class="retake-btn" onclick="retakeQuiz()">Retake Quiz</button>
              <!-- Share Buttons -->
              <div class="share-section">
                <button class="share-btn facebook" onclick="shareOnFacebook()">Share on Facebook</button>
                <button class="share-btn twitter" onclick="shareOnTwitter()">Share on Twitter</button>
                <button class="share-btn instagram" onclick="shareOnInstagram()">Share on Instagram</button>
            </div>
            <br> <br> 
            <!-- User Form -->
            <div id="user-form" class="form-section">
                <form id="user-form">
                    <div class="form-container">
                        <h2>Want your personalized Softbabe moodboard and discount code to use anytime? Drop your email!</h2>
                        <p>Optional: Share your details to get exclusive perks.</p>
                        <input type="text" id="user-name" name="name" placeholder="Your Name">
                        <input type="email" id="user-email" name="email" placeholder="Your Email">
                        <button type="button" class="form-btn" onclick="storeUserData()">Submit</button>
                        <p id="error-message" class="error-message" style="display:none;">Please fill in both fields correctly</p>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <footer>
        <div>Being soft is a lifestyle.</div>
    </footer>

    <script>
        function storeUserData() {
            const nameInput = document.getElementById('user-name').value.trim();
            const emailInput = document.getElementById('user-email').value.trim();
            const errorMessage = document.getElementById('error-message');
            const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;

            if (nameInput || emailInput) {
                if (!nameInput || !emailRegex.test(emailInput)) {
                    errorMessage.style.display = 'block';
                    return;
                }
                errorMessage.style.display = 'none';
                sessionStorage.setItem('userName', nameInput);
                sessionStorage.setItem('userEmail', emailInput);
                submitResult(true);
            } else {
                errorMessage.style.display = 'none';
            }
        }

        function submitResult(includeUserDetails = false) {
            const userName = sessionStorage.getItem('userName') || '';
            const userEmail = sessionStorage.getItem('userEmail') || '';
            const quizAnswers = JSON.parse(sessionStorage.getItem('quizAnswers')) || {};
            const resultTitle = document.getElementById('result-title').innerText;

            if (!resultTitle || !Object.keys(quizAnswers).length) {
                console.error('Missing quiz data for submission');
                return;
            }

            const formData = new FormData();
            if (includeUserDetails && userName && userEmail) {
                formData.append('name', userName);
                formData.append('email', userEmail);
            }
            formData.append('finalResult', resultTitle);
            formData.append('answers', JSON.stringify(quizAnswers));

            fetch('https://formspree.io/f/xeoggvnd', {
                method: 'POST',
                body: formData,
                headers: {
                    'Accept': 'application/json'
                }
            })
            .then(response => response.json())
            .then(data => {
                if (data.ok) {
                    console.log('Form submitted successfully:', data);
                    if (includeUserDetails) {
                        alert('Your details have been successfully submitted. Check your email for your moodboard and discount code!');
                    }
                } else {
                    console.warn('Submission response received but not successful:', data);
                    if (includeUserDetails) {
                        alert('There was a problem submitting your details. Please try again.');
                    }
                }
            })
            .catch(error => {
                console.error('Error submitting form:', error);
                if (includeUserDetails) {
                    alert('There was an error submitting your details. Please check your network and try again.');
                }
            });
        }

        function showResults() {
            const answers = JSON.parse(sessionStorage.getItem('quizAnswers')) || {};
            const userName = sessionStorage.getItem('userName') || 'User';

            const styleCounts = {};
            for (let i = 1; i <= 6; i++) {
                const styles = answers[`q${i}`];
                if (Array.isArray(styles)) {
                    styles.forEach(style => {
                        styleCounts[style] = (styleCounts[style] || 0) + 1;
                    });
                }
            }

            const dominantStyle = Object.keys(styleCounts).reduce((a, b) => styleCounts[a] > styleCounts[b] ? a : b, 'Minimalist');

            document.getElementById('result-title').innerText = `${userName}, You’re ${dominantStyle}!`;

            const resultImage = document.getElementById('result-image');
            const styleImages = {
                'Statement Queen': 'result/statement.jpeg',
                'Luxe': 'result/luxe.jpeg',
                'Minimalist': 'result/minimalist.jpeg',
                'Trendsetter': 'result/trendsetter.jpeg',
                'Boss Babe': 'result/bossbabe.jpeg',
                'Bohemian': 'result/bohemian.jpeg',
                'Romantic': 'result/romantic.jpeg',
                'Sporty': 'result/sporty.jpeg',
                'Y2K': 'result/y2k.jpeg',
                'Afrocentric': 'result/afrocentric.jpeg',
                'Edgy': 'result/edgy.jpeg'
            };

            if (styleImages[dominantStyle]) {
                resultImage.src = styleImages[dominantStyle];
                resultImage.style.display = 'block';
            } else {
                resultImage.style.display = 'none';
            }

            submitResult(false);
        }

        function shareOnFacebook() {
            const resultTitle = document.getElementById('result-title').innerText;
            const style = resultTitle.split('You’re ')[1]?.replace('!', '') || 'Softbabe';
            const text = encodeURIComponent(`I'm a ${style}! Discover your Softbabe Style at Softbabe Lagos!`);
            const url = encodeURIComponent('https://softbabelagos.com');
            window.open(`https://www.facebook.com/sharer/sharer.php?u=${url}&quote=${text}`, '_blank');
        }

        function shareOnTwitter() {
            const resultTitle = document.getElementById('result-title').innerText;
            const style = resultTitle.split('You’re ')[1]?.replace('!', '') || 'Softbabe';
            const text = encodeURIComponent(`I'm a ${style}! Find your Softbabe Style! #SoftbabeLagos`);
            const url = encodeURIComponent('https://softbabelagos.com');
            window.open(`https://twitter.com/intent/tweet?text=${text}&url=${url}`, '_blank');
        }

        function shareOnInstagram() {
            const resultTitle = document.getElementById('result-title').innerText;
            const style = resultTitle.split('You’re ')[1]?.replace('!', '') || 'Softbabe';
            alert(`To share your result on Instagram:\n1. Take a screenshot of this page.\n2. Post it to your Instagram feed or story with the caption:\n"I'm a ${style}! Discover your Softbabe Style at softbabelagos.com! #SoftbabeLagos"\n3. Tag @softbabelagos for a chance to be featured!`);
        }

        function retakeQuiz() {
            sessionStorage.removeItem('quizAnswers');
            sessionStorage.removeItem('userName');
            sessionStorage.removeItem('userEmail');
            window.location.href = 'question1.html';
        }

        window.onload = showResults;
    </script>

</body>
</html>
